(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{501:function(t,a,s){t.exports=s.p+"assets/img/image-20200415143832875.04f79239.png"},660:function(t,a,s){"use strict";s.r(a);var e=s(15),v=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"mysql-逻辑架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-逻辑架构"}},[t._v("#")]),t._v(" MySQL 逻辑架构")]),t._v(" "),e("p",[e("img",{attrs:{src:s(501),alt:"image-20200415143832875"}})]),t._v(" "),e("p",[t._v("以上架构图，要牢记，这有助于深入理解 MySQL 服务器")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("第一层：链接处理")]),t._v(" "),e("p",[t._v("大多数基于网络的客户端/服务器工具等都有类似的架构。比如链接处理、授权认证、安全等")])]),t._v(" "),e("li",[e("p",[t._v("第二层：大多数的核心服务功能")]),t._v(" "),e("p",[t._v("包括查询解析、分析、优化、缓存以及所有的内置函数（如：日期、时间、数学和加密函数），所有跨存储引擎的功能都在这一层实现：存储过程、触发器、视图等")])]),t._v(" "),e("li",[e("p",[t._v("第三层：存储引擎")]),t._v(" "),e("p",[t._v("负责 MySQL 中数据的存储和提取。和 Linux 下文件系统一样，每个存储引擎都有他的优势和劣势。服务器通过 API 与存储引擎进行通信，这些接口屏蔽了不同存储引擎之间的差异。")]),t._v(" "),e("p",[t._v("存储引擎 API 包含十几个底层函数，用于执行诸如 「开始一个事物」或「根据主键提取一行记录」等操作。单存储引擎不会去解析 SQL（InnoDB 是一个列外，它会解析外键定义，MySQL 服务器本身没有实现该功能），不同存储引擎之间也不会相互通信，而只是简单的响应上层服务器的请求")])])]),t._v(" "),e("h2",{attrs:{id:"连接管理与安全性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接管理与安全性"}},[t._v("#")]),t._v(" 连接管理与安全性")]),t._v(" "),e("p",[t._v("每个客户端链接都会在服务器进程中分配一个线程，这个连接的查询只会在这个单独的线程中执行。MySQL 5.5  或更新版本提供了一个 API，支持线程池（Thread-Pooling）插件，可以使用线程池中少量的线程来服务大量的连接。")]),t._v(" "),e("p",[t._v("当客户端连接到 MySQL 服务器时，服务器对其进行认证。基于用户名、原始主机信息和密码（可选 SSL 方式连接）。一旦客户端连接成功，服务器会继续验证客户端是否具有执行某个特定查询的权限（如，是否运行对某个表执行 select 语句）")]),t._v(" "),e("h2",{attrs:{id:"优化与执行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化与执行"}},[t._v("#")]),t._v(" 优化与执行")]),t._v(" "),e("p",[t._v("MySQL 会解析查询，并创建内部数据结构（解析树），然后对其进行各种优化，包括重写查询、决定表的读取顺序，以及选择合适的索引等。用户可以通过特殊的关键字提示（hint） 优化器，影响它的抉择过程。也可以请求优化器解释（explain）优化过程的各个因素，使用户可以知道服务器是如何进行优化抉择的，并提供一个参考基准，便于用户重构查询和 schema、修改相关配置，使应用尽可能高效运行。 第 6 章详细讨论")]),t._v(" "),e("p",[t._v("优化器并不关心表使用的是什么存储引擎，但存储引擎对于优化查询是有影响的。优化器会请求存储引擎提供容量或某个具体操作的开销信息，以及表数据的统计信息等。例如，某些存储引擎的某种索引，可能对一些特定的查询有优化。关于索引与 schema 的优化请参考第 4、5 章")]),t._v(" "),e("p",[t._v("对于 SELECT 语句，在解析查询之前，服务器会先检查查询缓存（Query Cache），如果命中，服务器就不再执行查询解析、优化和执行的整个过程，而直接返回缓存中的结果集。第 7 章详细讨论")])])}),[],!1,null,null,null);a.default=v.exports}}]);